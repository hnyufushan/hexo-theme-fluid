---
title: docker安装websphere
date: 2024-01-13 14:29:56
permalink: /pages/10016.html
categories: 
  - 编程世界
  - Docker专区
tags: 
  - null

description: 
---

docker安装websphere


## 1，获取镜像。
- 运行一下命令

```shell
docker pull ibmcom/websphere-traditional:8.5.5.12-profile 
```

## 2，使用镜像生成容器并且启动容器：


```dockerfile
docker run --name websphere \
 -h websphere \
　　-e UPDATE_HOSTNAME=true \
 -p 9043:9043 \
 -p 9443:9443 \
 --restart=always \
 -d ibmcom/websphere-traditional:8.5.5.12-profile
```

## 3，查看生成登录的密码
- docker exec websphere cat /tmp/PASSWORD


## 4、通过浏览器访问websphere

- https://192.168.1.5:9043/ibm/console/login.do?action=secure


## 5、前面的步骤没出错，会进入如下登录页面

## 6、登录的账号和密码（登录的账号都是一样的，都是 wsadmin）
注意
- 如果忘记了websphere的密码，可以使用docker exec websphere cat /tmp/PASSWORD 命令来查看登录该容器的密码，账号都统一为 wsadmin。 （websphere为容器名）
- 如果容器启动不正常，可以使用 docker logs -f websphere 命令来查看容器启动的日志信息，确定错误原因。（websphere为容器名）
- 注意：websphere启动需要的时间会比较长，所以需要参考日志的输出来判断容器是否已经启动，不能立马访问，立马访问是不会有结果的
- 更改密码如下图：
![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/10016.png)

## 7、部署war包
![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100161.png)

- 选择war包文件 --> next
- 下一步默认，next
- 下一步，选中select
- 下一步，选中select，virtual_host 为default_host
- 下一步，尤为重要，设置上下文根，用来访问这个项目，不写的话无法启动。比如如上传的是 mavenDemo.war，Context Root目录下就写 /mavenDemo
- 下一步,finish
- 点击save后，war包已经上传安装成功了。系统自动跳转到启动页面。选中刚刚上传的war包（mavenDemo.war）,然后点击start。（启动成功时，右侧的红色叉叉会变成绿色箭头）
![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100162.png)

- 下面可以开始访问，在地址栏输入访问地址： https://安装websphere的主机IP：port/${Context Root栏填写的地址}
- 例如： https://10.1.162.16:9043/mavenDemo

注意：是https不是http

## 8、问题及解决
- 如果访问出错， 错误内容类似：SRVE0255E: A WebGroup/Virtual Host to handle /p2pd/servlet/dispatch has not been defined.
- 可通过以下步骤解决：
- 检查上下文根是否与url一致：
  ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100163.png)

- 点击Context Root For Web Modules按钮查看上下文

![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100164.png)

## 9、检查项目配置
1. 点击Applications --> Application Types --> Websphere enterprise ，点击部署出错的那个项目，例如 mavenDemo.war，点击进入Virtual hosts
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100165.png)
2. 选中 select，并且将virtual hosts选中为 default_host，然后点击 ok。之后会回到 configuration页面，点击上方的 save .
   检查环境配置（尤为重要）第一步，点击 Environment --> Virtual Hosts ,然后选中 default_host
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100166.png)
![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100167.png)
3. 检测服务配置1）. 依次选中 Servers --> Server Types --> Websphere Application Servers ，然后选择右侧出现的那个服务，例如我的是 server1
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100168.png)
 ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/100169.png)
4. 最后重新启动 websphere容器，再次访问项目，在地址栏中输入访问链接。 https://10.1.162.16:9043/mavenDemo/便能访问成功。(是https而不是http)

## 10、部署ear
第一步，得先有个ear包进行测试
1. 新建package文件夹，将原有war包（比如11.war）放进去
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/1001691.png)
2. 新建META-INF文件夹，并在META-INF文件夹下创建application.xml
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/1001692.png)
3. 注：每个<module></module>代表一个web应用,可添加多个web应用，本测试为方便只创建了一个应用
   <display-name></display-name>表示部署到was后，仅表示应用名称。
   <web-uri></web-url>表示war包名称。
   <context-root></context-root>表示部署路径，各module子节点值不要同名。
4. 创建好xml后，进入dos命令,cd到packge目录,输入jar cf test.ear 11.war META-INF/application.xml命令，达成ear包:
5. 注： 也可以使用jar xf test.ear来解压.ear包
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/1001693.png)
6. 至此.ear包创建完成
   ![](https://mp-09fcd8a7-9cfd-4c7c-a49a-6d3b4574db95.cdn.bspapp.com/1001694.png)
7. 第二步，部署ear与部署war包基本一样，本着认真负责的态度，还是贴一下图吧
8. 最后：访问https://10.1.162.16:9043/11/